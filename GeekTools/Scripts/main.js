function textTriggers() { $("[data-trigger]").each(function (e, a) { var t = $(a).attr("data-trigger"); window.innerWidth <= t ? $(a).html($(a).attr("data-alternate-text")) : $(a).html($(a).attr("data-normal-text")) }) } $(document).ready(function () { $("html").addClass($.browser.name).addClass($.browser.name + "-" + $.browser.version.split(".")[0]), $(".nav-toggle").bind("click", function (e) { e.preventDefault(), e.stopPropagation(), $("body").toggleClass("navigation-open") }), $(".navigation").bind("click", function (e) { e.stopPropagation() }), $("body").bind("click", function () { $("body").hasClass("navigation-open") && $("body").removeClass("navigation-open") }), $(".video-link > a").bind("click", function (e) { e.preventDefault(); var a = $(this).attr("data-video-url"); $("body").append('\n			<div class="video-overlay">\n				<div class="video-header">\n					<a href="#" class="close-overlay">Close Video</a>\n				</div>\n				<div class="video-wrapper">\n					<div class="video-container">\n						<iframe src="https://player.vimeo.com/video/' + a + '?autoplay=1&color=8861A9&title=0&byline=0&portrait=0" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n					</div>\n				</div>\n			</div>\n		'), setTimeout(function () { $(".video-overlay").addClass("show"), $("body").addClass("overlay-open") }, 50), $(".close-overlay").bind("click", function (e) { e.preventDefault(), e.stopPropagation(), setTimeout(function () { $(".video-overlay").removeClass("show"), setTimeout(function () { $(".video-overlay").remove(), $("body").removeClass("overlay-open") }, 500) }, 50) }), $("body").bind("keyup", function (e) { 27 == e.keyCode && $(".close-overlay").click() }) }), $(".discover .video-link a").click(function () { ga("send", "event", "video", "click", "Discover video") }), $(".journey .video-link a").click(function () { ga("send", "event", "video", "click", "Journey video") }), textTriggers(), $("html").hasClass("contact") && $("select").select2({ width: "100%", minimumResultsForSearch: 1 / 0, placeholder: "I’d like to talk about…" }), $(".load-more").bind("click", function (e) { e.preventDefault(); var a = $(this); $(a).hasClass("disabled") || ($(a).addClass("disabled"), $.ajax({ type: "post", url: $("[data-admin-ajax]").attr("data-admin-ajax"), data: { action: "load_more_posts", offset: $(".article-list.quarter li").length }, success: function (e) { $(".article-list.quarter ul").append(e), $("[data-total-posts]").attr("data-total-posts") == $(".article-list.quarter ul li").length + 1 && $(".article-list.quarter ul").addClass("all"), $(a).removeClass("disabled") } })) }), $(".subscribe form").bind("submit", function (e) { e.preventDefault(), "" === $("#subscribe-email").val() || $("#subscribe-send").hasClass("disabled") ? $("#subscribe-email").focus() : ($("#subscribe-send").addClass("disabled"), $.ajax({ type: "post", url: $("[data-admin-ajax]").attr("data-admin-ajax"), data: { action: "subscribe_newsletter", email_address: $("#subscribe-email").val().toLowerCase() }, success: function (e) { if (e = jQuery.parseJSON(e), e.status) { var a = document.title; document.title = "Thanks for subscribing", $("#subscribe-send").attr("value", "Thanks for Subscribing").attr("role", "alert").addClass("thanks"), window.innerWidth <= 480 && $("#subscribe-send").attr("value", "Thanks"), setTimeout(function () { document.title = a, $("#subscribe-send").attr("value", "Subscribe").removeAttr("role").removeClass("thanks disabled"), $("#subscribe-email").val("") }, 5e3) } } })) }), $("iframe").each(function () { $(this).attr("data-aspect-ratio", this.height / this.width).removeAttr("height").removeAttr("width") }), $(window).resize() }); var triggerTimeout; $(window).resize(function () { if (clearTimeout(triggerTimeout), triggerTimeout = setTimeout(function () { textTriggers() }, 250), $(".article-body")) { var e = $(".article-body").width(); $("iframe").each(function () { $(this).width(e).height(e * $(this).attr("data-aspect-ratio")) }) } }), $(window).load(function () { $("body").addClass("animate") });